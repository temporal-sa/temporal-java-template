<?xml version="1.0" encoding="UTF-8"?>
<FindBugsFilter>
    <!-- Exclude test files from certain checks -->
    <Match>
        <Class name="~.*Test"/>
        <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
    </Match>

    <Match>
        <Class name="~.*Test"/>
        <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
    </Match>

    <!-- Temporal workflow classes use non-serializable fields by design -->
    <Match>
        <Class name="~.*WorkflowImpl"/>
        <Bug pattern="SE_BAD_FIELD"/>
    </Match>

    <Match>
        <Class name="~.*ActivitiesImpl"/>
        <Bug pattern="SE_BAD_FIELD"/>
    </Match>

    <!-- Allow Temporal workflows to have non-final fields (required for Temporal SDK) -->
    <Match>
        <Class name="~.*WorkflowImpl"/>
        <Bug pattern="MS_SHOULD_BE_FINAL"/>
    </Match>

    <!-- Allow Activities to store mutable objects from constructor (dependency injection) -->
    <Match>
        <Class name="~.*ActivitiesImpl"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <!-- Temporal data models (records) may expose mutable collections by design -->
    <Match>
        <Class name="~.*Input"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>

    <Match>
        <Class name="~.*Output"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>

    <Match>
        <Class name="~.*Input"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <Match>
        <Class name="~.*Output"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>
</FindBugsFilter>
